<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz Musical - Descubra Sua Playlist Perfeita</title>
  <style>
    /* Reset e configurações básicas */
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:linear-gradient(135deg,#1a0033 0%,#2d1b69 50%,#000 100%);
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      color:#fff;overflow-x:hidden;line-height:1.6
    }
    .container{width:100%;max-width:700px;margin:0 auto;padding:20px}

    /* Estilos do quiz */
    .quiz-container{
      background:rgba(0,0,0,.6);border-radius:20px;padding:40px 30px;
      box-shadow:0 20px 40px rgba(138,43,226,.3);backdrop-filter:blur(10px);
      border:1px solid rgba(138,43,226,.2);transition:all .5s ease
    }
    .progress-bar{width:100%;height:8px;background:rgba(138,43,226,.2);border-radius:4px;margin-bottom:40px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,#8a2be2,#9966cc);border-radius:4px;width:0%;transition:width .5s ease}

    .question-container{margin-bottom:30px;opacity:0;transform:translateY(20px);animation:fadeInUp .6s ease forwards}
    .question-container.active{opacity:1;transform:translateY(0)}
    .question-number{font-size:.9rem;color:#8a2be2;margin-bottom:10px;font-weight:600}
    .question{font-size:1.5rem;margin-bottom:25px;text-align:center;color:#fff;font-weight:600}
    .options{display:flex;flex-direction:column;gap:15px}
    .option{
      background:linear-gradient(135deg,#8a2be2 0%,#6a0dad 100%);border:none;
      padding:18px 25px;border-radius:50px;color:#fff;font-size:1.1rem;font-weight:500;
      cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;
      border:1px solid rgba(138,43,226,.3);text-align:center
    }
    .option::before{
      content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);
      transition:left .5s
    }
    .option:hover::before{left:100%}
    .option:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(138,43,226,.4)}
    .option.selected{background:linear-gradient(135deg,#9966cc 0%,#663399 100%);transform:scale(1.02);box-shadow:0 0 20px rgba(138,43,226,.6)}

    /* Caixa de presente */
    .gift-container{display:none;text-align:center;background:rgba(0,0,0,.6);border-radius:20px;padding:40px 30px;box-shadow:0 20px 40px rgba(138,43,226,.3);backdrop-filter:blur(10px);border:1px solid rgba(138,43,226,.2)}
    .gift-title{font-size:2rem;margin-bottom:30px;color:#fff}
    .gift-box{width:150px;height:150px;margin:0 auto 30px;position:relative;cursor:pointer;animation:pulse 2s infinite}
    .gift-box:hover{animation:shake .5s infinite}
    .gift-base{width:100%;height:100%;background:linear-gradient(135deg,#ff6b6b,#ee5a24);border-radius:10px;position:relative;box-shadow:0 10px 30px rgba(0,0,0,.2)}
    .gift-ribbon-horizontal{position:absolute;top:50%;left:0;right:0;height:20px;background:linear-gradient(135deg,#feca57,#ff9ff3);transform:translateY(-50%)}
    .gift-ribbon-vertical{position:absolute;top:0;bottom:0;left:50%;width:20px;background:linear-gradient(135deg,#feca57,#ff9ff3);transform:translateX(-50%)}
    .gift-bow{position:absolute;top:-10px;left:50%;transform:translateX(-50%);width:40px;height:30px;background:linear-gradient(135deg,#ff6348,#c44569);border-radius:50px 50px 0 0}
    .gift-bow::before,.gift-bow::after{content:'';position:absolute;width:20px;height:20px;background:inherit;border-radius:50%;top:5px}
    .gift-bow::before{left:-15px}.gift-bow::after{right:-15px}
    .gift-instruction{font-size:1.2rem;color:#ccc;margin-top:20px}

    /* Resultado */
    .result-container{display:none;text-align:center;background:rgba(0,0,0,.6);border-radius:20px;padding:40px 30px;box-shadow:0 20px 40px rgba(138,43,226,.3);backdrop-filter:blur(10px);border:1px solid rgba(138,43,226,.2)}
    .result-title{font-size:2rem;margin-bottom:20px;color:#fff}
    .spotify-embed{margin:30px 0;border-radius:12px;overflow:hidden}
    .spotify-button{
      display:inline-flex;align-items:center;gap:10px;padding:15px 30px;background:#1db954;color:#fff;text-decoration:none;border-radius:50px;font-weight:600;font-size:1.1rem;transition:all .3s ease;margin-top:20px
    }
    .spotify-button:hover{background:#1ed760;transform:translateY(-2px);box-shadow:0 10px 25px rgba(29,185,84,.4);text-decoration:none;color:#fff}

    /* Feedback */
    .feedback-section{margin-top:40px;padding:20px;text-align:center;border-top:1px solid rgba(138,43,226,.3)}
    .feedback-title{font-size:1.3rem;color:#fff;margin-bottom:15px}
    .instagram-link{
      display:inline-flex;align-items:center;gap:10px;padding:12px 20px;background:linear-gradient(135deg,#E4405F,#C13584,#833AB4);color:#fff;text-decoration:none;border-radius:25px;font-weight:500;transition:all .3s ease;border:1px solid rgba(196,53,132,.3)
    }
    .instagram-link:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(196,53,132,.4);text-decoration:none;color:#fff}
    .instagram-logo{width:20px;height:20px;background:#fff;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;color:#E4405F}

    /* Animações */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}

    /* Responsividade */
    @media (max-width:768px){
      .container{padding:10px}
      .quiz-container,.gift-container,.result-container{padding:30px 20px;margin:10px}
      .question{font-size:1.3rem}
      .option{padding:15px 20px;font-size:1rem}
      .options{gap:12px}
    }
    @media (max-width:480px){
      .question{font-size:1.2rem}
      .gift-box{width:120px;height:120px}
      .spotify-embed iframe{height:280px !important}
    }

    .hidden{display:none !important}
    .show{display:block !important}
  </style>
</head>
<body>
  <div class="container">

    <!-- Seção do Quiz (todas as perguntas ficam AQUI dentro) -->
    <div id="quiz-section" class="quiz-container">
      <div class="progress-bar">
        <div id="progress-fill" class="progress-fill"></div>
      </div>

      <!-- Pergunta 1 -->
      <div class="question-container active" data-question="1">
        <div class="question-number">Pergunta 1 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="trap_rap" onclick="selectAnswer(this, 1)">🎤 Kendrick Lamar</button>
          <button class="option" data-value="pop" onclick="selectAnswer(this, 1)">🎀 Sabrina Carpenter</button>
        </div>
      </div>

      <!-- Pergunta 2 -->
      <div class="question-container" data-question="2">
        <div class="question-number">Pergunta 2 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="pop" onclick="selectAnswer(this, 2)">✨ Ariana Grande</button>
          <button class="option" data-value="rock" onclick="selectAnswer(this, 2)">🎸 System of a Down</button>
        </div>
      </div>

      <!-- Pergunta 3 -->
      <div class="question-container" data-question="3">
        <div class="question-number">Pergunta 3 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="pop" onclick="selectAnswer(this, 3)">🌙 The Neighbourhood</button>
          <button class="option" data-value="trap_rap" onclick="selectAnswer(this, 3)">🔥 Travis Scott</button>
        </div>
      </div>

      <!-- Pergunta 4 -->
      <div class="question-container" data-question="4">
        <div class="question-number">Pergunta 4 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="pop" onclick="selectAnswer(this, 4)">🎵 Chase Atlantic</button>
          <button class="option" data-value="jazz" onclick="selectAnswer(this, 4)">🎩 Frank Sinatra</button>
        </div>
      </div>

      <!-- Pergunta 5 -->
      <div class="question-container" data-question="5">
        <div class="question-number">Pergunta 5 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="rock" onclick="selectAnswer(this, 5)">⚡ Linkin Park</button>
          <button class="option" data-value="jazz" onclick="selectAnswer(this, 5)">🎹 Stevie Wonder</button>
        </div>
      </div>

      <!-- Pergunta 6 -->
      <div class="question-container" data-question="6">
        <div class="question-number">Pergunta 6 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="rock" onclick="selectAnswer(this, 6)">🤘 Limp Bizkit</button>
          <button class="option" data-value="jazz" onclick="selectAnswer(this, 6)">🎺 Djavan</button>
        </div>
      </div>

      <!-- Pergunta 7 -->
      <div class="question-container" data-question="7">
        <div class="question-number">Pergunta 7 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="rock" onclick="selectAnswer(this, 7)">🎤 Nirvana</button>
          <button class="option" data-value="trap_rap" onclick="selectAnswer(this, 7)">🎤 J. Cole</button>
        </div>
      </div>

      <!-- Pergunta 8 -->
      <div class="question-container" data-question="8">
        <div class="question-number">Pergunta 8 de 8</div>
        <h2 class="question">Você prefere:</h2>
        <div class="options">
          <button class="option" data-value="pop" onclick="selectAnswer(this, 8)">🎀 Dua Lipa</button>
          <button class="option" data-value="trap_rap" onclick="selectAnswer(this, 8)">🎧 Kanye West (antes do falecimento)</button>
        </div>
      </div>
    </div>
    <!-- FIM do quiz-section -->

    <!-- Seção da Caixa de Presente -->
    <div id="gift-section" class="gift-container hidden">
      <h2 class="gift-title">🎁 Sua playlist está pronta!</h2>
      <div class="gift-box" onclick="openGift()">
        <div class="gift-base">
          <div class="gift-ribbon-horizontal"></div>
          <div class="gift-ribbon-vertical"></div>
          <div class="gift-bow"></div>
        </div>
      </div>
      <p class="gift-instruction">Clique na caixa para descobrir sua playlist personalizada!</p>
    </div>

    <!-- Seção do Resultado -->
    <div id="result-section" class="result-container hidden">
      <h2 id="result-title" class="result-title">🎉 Sua Playlist Personalizada!</h2>
      <div id="spotify-embed" class="spotify-embed"></div>
      <a id="spotify-button" href="#" target="_blank" class="spotify-button">🎵 Abrir no Spotify</a>

      <div class="feedback-section">
        <p class="feedback-title">Gostou da playlist?</p>
        <a href="https://instagram.com/mene_gucci" target="_blank" class="instagram-link">
          <div class="instagram-logo">📷</div>
          <span>Me fale mais @mene_gucci</span>
        </a>
      </div>
    </div>
  </div>

  <script>
    const PLAYLISTS = {
      trap_rap:{url:'https://open.spotify.com/playlist/6J4rnOJxIX2GwOUoLwUuAt?si=RXGz5xDUSGiMxYprGfATbQ&pi=6ARg6DL9RaaPw',embed:'https://open.spotify.com/playlist/6J4rnOJxIX2GwOUoLwUuAt?si=RXGz5xDUSGiMxYprGfATbQ&pi=6ARg6DL9RaaPw',name:'Trap/Rap',emoji:'🎤'},
      pop:{url:'https://open.spotify.com/playlist/5z7GlXBi55cNftmFNlnqYL?si=3_u066LZTz24Bps01VfkOg',embed:'https://open.spotify.com/playlist/5z7GlXBi55cNftmFNlnqYL?si=3_u066LZTz24Bps01VfkOg',name:'Pop Girl',emoji:'💖'},
      rock:{url:'https://open.spotify.com/playlist/0bXrU9ucQP1wYRAgXClCIS?si=KfVcKjVUSS6C9QHwyodx8g',embed:'https://open.spotify.com/playlist/0bXrU9ucQP1wYRAgXClCIS?si=KfVcKjVUSS6C9QHwyodx8g',name:'Rock',emoji:'🎸'},
      jazz:{url:'https://open.spotify.com/playlist/1sLppWhzxC5wVq9cfXbL4w?si=Cyli1BnARTikFHl7NQeVtg',embed:'https://open.spotify.com/playlist/1sLppWhzxC5wVq9cfXbL4w?si=Cyli1BnARTikFHl7NQeVtg',name:'Jazz',emoji:'🎷'},
      mix:{url:'https://open.spotify.com/playlist/37i9dQZF1DWXRqgorJj26U',embed:'https://open.spotify.com/embed/playlist/37i9dQZF1DWXRqgorJj26U',name:'Mix',emoji:'🎵'}
    };

    let currentQuestion = 1;
    let answers = {};
    const totalQuestions = 8;

    function selectAnswer(selectedOption, questionNum){
      const currentContainer = document.querySelector(`[data-question="${questionNum}"]`);
      currentContainer.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
      selectedOption.classList.add('selected');
      answers[questionNum] = selectedOption.getAttribute('data-value');
      updateProgress();

      setTimeout(()=>{
        if(currentQuestion < totalQuestions){ nextQuestion(); }
        else{ finishQuiz(); }
      },800);
    }

    function nextQuestion(){
      const currentContainer = document.querySelector(`[data-question="${currentQuestion}"]`);
      currentContainer.classList.remove('active');
      currentContainer.style.display = 'none';
      currentQuestion++;
      const nextContainer = document.querySelector(`[data-question="${currentQuestion}"]`);
      nextContainer.style.display = 'block';
      setTimeout(()=>nextContainer.classList.add('active'),100);
    }

    function updateProgress(){
      const progress = (Object.keys(answers).length / totalQuestions) * 100;
      document.getElementById('progress-fill').style.width = progress + '%';
    }

    function finishQuiz(){
      setTimeout(()=>{
        document.querySelectorAll('.question-container').forEach(c=>{
          c.style.display='none'; c.classList.remove('active');
        });
        document.getElementById('quiz-section').classList.add('hidden');
        document.getElementById('gift-section').classList.remove('hidden');
        document.getElementById('gift-section').classList.add('show');
      },1000);
    }

    function determinePlaylistType(){
      const responses = Object.values(answers);
      const categoryCount = {trap_rap:0,pop:0,rock:0,jazz:0};
      responses.forEach(r=>{ if(categoryCount.hasOwnProperty(r)) categoryCount[r]++; });
      let maxCount = 0, winning = [];
      Object.keys(categoryCount).forEach(cat=>{
        const count = categoryCount[cat];
        if(count > maxCount){ maxCount = count; winning = [cat]; }
        else if(count === maxCount && count > 0){ winning.push(cat); }
      });
      if(winning.length !== 1 || maxCount === 0) return 'mix';
      return winning[0];
    }

    function openGift(){
      const playlistType = determinePlaylistType();
      const playlist = PLAYLISTS[playlistType];
      const giftBox = document.querySelector('.gift-box');
      giftBox.style.animation = 'shake .5s ease-in-out 3';
      setTimeout(()=>{
        document.getElementById('gift-section').classList.add('hidden');
        setupResult(playlist);
        document.getElementById('result-section').classList.remove('hidden');
        document.getElementById('result-section').classList.add('show');
      },1500);
    }

    function setupResult(playlist){
      document.getElementById('result-title').innerHTML = `${playlist.emoji} Sua Playlist de ${playlist.name}!`;
      const embedContainer = document.getElementById('spotify-embed');
      embedContainer.innerHTML = `
        <iframe src="${playlist.embed}?utm_source=generator&theme=0" width="100%" height="352" frameBorder="0"
          allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>`;
      document.getElementById('spotify-button').href = playlist.url;
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      const questionContainers = document.querySelectorAll('.question-container');
      questionContainers.forEach((c,i)=>{ if(i>0) c.style.display='none'; });
      console.log('Quiz Musical iniciado!');
    });
  </script>
</body>
</html>
